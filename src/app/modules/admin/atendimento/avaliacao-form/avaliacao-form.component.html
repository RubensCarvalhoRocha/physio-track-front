<div class="w-full p-8 bg-white border rounded shadow">
    <h2 class="text-3xl font-semibold mb-6">
        {{ isEditMode ? "Editar Avalia√ß√£o" : "Nova Avalia√ß√£o" }}
    </h2>

    <form [formGroup]="avaliacaoForm" (ngSubmit)="salvar()" class="space-y-6">
        <mat-accordion multi>
            <!-- ü©∫ ANAMNESE (Dados Gerais) -->
            <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header>
                    <mat-panel-title> Anamnese </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="grid grid-cols-4 gap-4 p-4">
                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Altura (cm)</mat-label>
                        <input
                            matInput
                            type="number"
                            formControlName="altura"
                        />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Peso (kg)</mat-label>
                        <input matInput type="number" formControlName="peso" />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>IMC</mat-label>
                        <input
                            matInput
                            type="number"
                            formControlName="imc"
                            readonly
                        />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Esporte</mat-label>
                        <input matInput type="text" formControlName="esporte" />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Diagn√≥stico M√©dico</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="diagnosticoMedico"
                        />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Queixas</mat-label>
                        <input matInput type="text" formControlName="queixas" />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Hist√≥rico de Sa√∫de</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="historicoSaude"
                        />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Medicamentos</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="medicamentos"
                        />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Cirurgias</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="cirurgia"
                        />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Tratamentos Anteriores</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="tratamentoAnterior"
                        />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Exames de Imagem</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="exameImagem"
                        />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Objetivo do Tratamento</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="objTratamento"
                        />
                    </mat-form-field>
                </div>

                <div class="p-4">
                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Observa√ß√µes Gerais</mat-label>
                        <textarea
                            matInput
                            formControlName="obsGerais"
                            rows="4"
                        ></textarea>
                    </mat-form-field>
                </div>
            </mat-expansion-panel>

            <!-- üìè PERIMETRIA -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title> Perimetria </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="grid grid-cols-4 gap-4 p-4">
                    <mat-form-field
                        appearance="fill"
                        class="w-full"
                        *ngFor="let campo of perimetriaCampos"
                    >
                        <mat-label>{{ campo.label }}</mat-label>
                        <input
                            matInput
                            type="number"
                            [formControlName]="campo.nome"
                        />
                    </mat-form-field>
                </div>
            </mat-expansion-panel>

            <!-- ü¶µ LUNGE -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title> Lunge Test </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="grid grid-cols-3 gap-4 p-4">
                    <mat-form-field
                        appearance="fill"
                        class="w-full"
                        *ngFor="let campo of lungeCampos"
                    >
                        <mat-label>{{ campo.label }}</mat-label>
                        <input
                            matInput
                            type="number"
                            [formControlName]="campo.nome"
                        />
                    </mat-form-field>
                </div>
            </mat-expansion-panel>

            <!-- ü¶æ ROTADORES DE QUADRIL -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        ADM - Rotadores de Quadril
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="grid grid-cols-3 gap-4 p-4">
                    <mat-form-field
                        appearance="fill"
                        class="w-full"
                        *ngFor="let campo of quadrilCampos"
                    >
                        <mat-label>{{ campo.label }}</mat-label>
                        <input
                            matInput
                            type="number"
                            [formControlName]="campo.nome"
                        />
                    </mat-form-field>
                </div>
            </mat-expansion-panel>

            <!-- ü¶ø JOELHO -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Extens√£o / Flex√£o de Joelho
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="grid grid-cols-3 gap-4 p-4">
                    <mat-form-field
                        appearance="fill"
                        class="w-full"
                        *ngFor="let campo of joelhoCampos"
                    >
                        <mat-label>{{ campo.label }}</mat-label>
                        <input
                            matInput
                            type="number"
                            [formControlName]="campo.nome"
                        />
                    </mat-form-field>
                </div>
            </mat-expansion-panel>

            <!-- ü¶∂ SINGLE HOP -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title> Single Hop Test </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="grid grid-cols-4 gap-4 p-4">
                    <mat-form-field
                        appearance="fill"
                        class="w-full"
                        *ngFor="let campo of singleHopCampos"
                    >
                        <mat-label>{{ campo.label }}</mat-label>
                        <input
                            matInput
                            type="number"
                            [formControlName]="campo.nome"
                        />
                    </mat-form-field>
                </div>
            </mat-expansion-panel>

            <!-- üèÉ SIDE HOP -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title> Side Hop Test </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="grid grid-cols-4 gap-4 p-4">
                    <mat-form-field
                        appearance="fill"
                        class="w-full"
                        *ngFor="let campo of sideHopCampos"
                    >
                        <mat-label>{{ campo.label }}</mat-label>
                        <input
                            matInput
                            type="number"
                            [formControlName]="campo.nome"
                        />
                    </mat-form-field>
                </div>
            </mat-expansion-panel>

            <!-- üßç SINGLE LEG BRIDGE -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title> Single Leg Bridge </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="grid grid-cols-2 gap-4 p-4">
                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>SLB Test (Direita)</mat-label>
                        <input
                            matInput
                            type="number"
                            formControlName="slbTestD"
                        />
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>SLB Test (Esquerda)</mat-label>
                        <input
                            matInput
                            type="number"
                            formControlName="slbTestE"
                        />
                    </mat-form-field>
                </div>
            </mat-expansion-panel>

            <!-- üóíÔ∏è OBSERVA√á√ÉO FINAL -->
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title> Observa√ß√£o Final </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="p-4">
                    <mat-form-field appearance="fill" class="w-full">
                        <mat-label>Observa√ß√£o</mat-label>
                        <textarea
                            matInput
                            formControlName="observacao"
                            rows="4"
                        ></textarea>
                    </mat-form-field>
                </div>
            </mat-expansion-panel>
        </mat-accordion>

        <!-- Bot√µes -->
        <div class="flex justify-end gap-4 pt-6 border-t">
            <button type="button" mat-stroked-button (click)="cancelar()">
                Cancelar
            </button>
            <button
                type="submit"
                mat-flat-button
                color="primary"
                [disabled]="avaliacaoForm.invalid"
            >
                {{ isEditMode ? "Atualizar" : "Salvar" }}
            </button>
        </div>
    </form>
</div>
